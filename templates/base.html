<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibeZone - {% block title %}{% endblock %}</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="{{ url_for('home') }}" class="logo">ðŸ’– VibeZone</a>

            <div class="nav-links">
                {% if current_user.is_authenticated %}
                    <a href="{{ url_for('feed') }}" class="nav-link">Feed</a>
                    <a href="{{ url_for('inbox') }}" class="nav-link">Mes Vibes</a>
                    <a href="{{ url_for('profile', user_id=current_user.id) }}" class="nav-link">Mon Profil</a>
                    <a href="{{ url_for('logout') }}" class="nav-link btn btn-logout">DÃ©connexion</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="nav-link">Connexion</a>
                    <a href="{{ url_for('register') }}" class="btn btn-primary">Inscription</a>
                {% endif %}
            </div>
        </nav>
    </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages-container" style="position: fixed; top: 80px; right: 20px; z-index: 1000; width: 320px;">
          {% for category, message in messages %}
            {% set color_code = '#4A8BDF' %}
            {% if category == 'success' %}
              {% set color_code = '#4CAF50' %}
            {% elif category == 'danger' or category == 'warning' %}
              {% set color_code = '#FF4B91' %}
            {% endif %}

            <div class="alert alert-{{ category }}" role="alert"
                  style="padding: 15px; margin-bottom: 10px; border-radius: 8px; color: white;
                        background-color: {{ color_code }};
                        box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative;">
              {{ message }}
              <button type="button" class="close" style="float: right; background: none; border: none; color: white; font-size: 1.2em; cursor: pointer;" onclick="this.parentElement.style.display='none';">&times;</button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <main class="container">
        {% block content %}{% endblock %}
    </main>
</body>
</html>